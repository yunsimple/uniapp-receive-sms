<template>
	<view class="phone-list gui-flex gui-rows gui-nowrap gui-space-between" :data-bh="item.country.bh"
		:data-phone_num="item.phone_num" @click="click">
		<view class="gui-flex gui-rows gui-nowrap gui-justify-content-start">
			<view class="phone-list-left">
				<image class="guoqi" :src="imageUrl(item.country.bh)" mode="scaleToFill"></image>
			</view>
			<view class="phone-list-middle gui-flex gui-columns gui-justify-content-center">
				<view class="phone-list-middle-top">
					<text class="text-country">{{item.country.title}}</text>
				</view>
				<view
					class="phone-list-middle-bottom gui-flex gui-nowrap gui-justify-content-start gui-align-items-center">
					<text class="text-phone" style="font-size: 25rpx;margin-top: 4rpx;">+{{item.country.bh}}</text>
					<text :data-bh="item.country.bh" :data-phone_num="item.phone_num" @longpress="longClickCopy"
						@click="click" class="text-phone"> {{item.phone_num}}</text>
				</view>
			</view>
		</view>
		<view class="phone-list-right gui-flex gui-columns gui-justify-content-center gui-flex1">
			<view class="phone-list-right-top">
				<text class="text-time explain-text gui-h8 ysdx-icons">&#xe65b; {{lastTime(item.last_time)}}</text>
			</view>
			<view class="phone-list-right-bottom gui-flex gui-rows gui-space-between">
				<view>
					<gui-tags-ysdx :text="item.total_num" bgClass="gui-bg-green" :size="22" :margin="0" :lineHeight="2">
					</gui-tags-ysdx>
				</view>
			</view>
		</view>
	</view>
</template>
<script>
	import clipboard from "@/js_sdk/dc-clipboard/clipboard.js"
	import {
		toDate,
		lastTime
	} from "@/utils/tools.js"
	export default {
		props: {
			item: {
				type: Object,
				default: function() {
					return {}
				}
			}
		},
		methods: {
			click: function(e) { //点击事件
				let phone_num = e.target.dataset.phone_num
				let bh = e.target.dataset.bh
				uni.navigateTo({
					url: 'message?phone_num=' + phone_num + '&bh=' + bh
				})
			},
			longClickCopy: function(e) { //点击号码复制
				e.stopPropagation(); //阻止冒泡
				let phone_num = e.target.dataset.phone_num
				clipboard.setText(phone_num)
				//this.$refs.message.open('复制号码 ' + phone_num + ' 成功', 'info', 2000)
				uni.showToast({
					title: '复制成功'
				})
			},
			toDate(timestamp) { //转换时间
				return toDate(timestamp)
			},
			lastTime(timeStamp) { //最后时间间隔
				return lastTime(timeStamp)
			},
			showmsg() {
				this.$refs.message.open('复制号码 ', 'success', 133000)
			},
			//生成国旗图片方法
			imageUrl: function(bh) {
				return '../static/images/guoqi/' + bh + '.png'
			}
		}
	}
</script>
<style>
	/*号码列表*/
	.phone-list {
		margin-top: 30rpx;
		padding-left: 20rpx;
		padding-right: 20rpx;
		padding-top: 10rpx;
		padding-bottom: 10rpx;
		background-color: #F1F2F3;
		/* border-radius: 10rpx; */
		height: 150rpx;
	}

	.text-country {
		font-size: 28rpx;
		font-weight: bold;
	}

	.text-phone {
		font-size: 35rpx;
		font-weight: 800;
	}

	.text-time {
		font-size: 20rpx;
	}

	.text-number {
		font-size: 20rpx;
	}


	.phone-list-left {
		width: 120rpx;
		margin-top: 8rpx;
	}

	.guoqi {
		width: 120rpx;
		height: 120rpx;
	}

	.phone-list-right {
		align-items: flex-end;
	}

	.phone-list-right-top {}

	.phone-list-right-bottom {
		margin-top: 18rpx;
	}
</style>
