<template>
	<view class="phone-list">

		<view class="phone-left">
			<view class="phone-list-left" :data-id="item.country.id" :data-country="item.country.title" @click="countryList">
				<u--image :src="imageUrl(item.country.bh)" width="120rpx" height="120rpx"></u--image>
			</view>
			<view class="phone-list-middle">
				<view class="phone-list-middle-top">
					<text class="text-country">{{item.country.title}}</text>
				</view>
				<view class="phone-list-middle-bottom">
					<text class="text-phone" style="font-size: 25rpx;align-self: center;">+{{item.country.bh}}</text>
					<text :data-bh="item.country.bh" :data-phone_num="item.phone_num" @longpress="longClickCopy"
						@click="click" class="text-phone"> {{item.phone_num}}</text>
				</view>
			</view>
		</view>

		<view class="phone-list-right">
			<view class="phone-list-right-top">
				<u-icon name="clock" size="25rpx" color="info"></u-icon><u--text type="info" size="12" :text="lastTime(item.last_time)"></u--text>
			</view>
			<view class="phone-list-right-bottom">
				<view>
					<u-tag-my size="mini" text="500+" bgColor="#07C160" borderColor="#07C160" icon="chat"></u-tag-my>
				</view>
			</view>
		</view>
	<u-notify ref="notify"></u-notify>
	</view>
</template>
<script>
	import clipboard from "@/js_sdk/dc-clipboard/clipboard.js"
	import {
		toDate,
		lastTime
	} from "@/utils/tools.js"
	export default {
		props: {
			item: {
				type: Object,
				default: function() {
					return {}
				}
			}
		},
		methods: {
			click: function(e) { //点击事件
				let phone_num = e.target.dataset.phone_num
				let bh = e.target.dataset.bh
				uni.navigateTo({
					url: 'message?phone_num=' + phone_num + '&bh=' + bh
				})
			},
			longClickCopy: function(e) { //点击号码复制
				e.stopPropagation(); //阻止冒泡
				let phone_num = e.target.dataset.phone_num
				clipboard.setText(phone_num)
				this.$refs.notify.success('复制 ' + phone_num + ' 成功')
			},
			toDate(timestamp) { //转换时间
				return toDate(timestamp)
			},
			lastTime(timeStamp) { //最后时间间隔
				return lastTime(timeStamp)
			},
			showmsg() {
				this.$refs.message.open('复制号码 ', 'success', 133000)
			},
			//生成国旗图片方法
			imageUrl: function(bh) {
				return '../static/images/guoqi/' + bh + '.png'
			},
			countryList: function(e) { //点击事件
				console.log(e)
				let id = e.target.dataset.id
				let country = e.target.dataset.country
				uni.navigateTo({
					url: 'phone-category?type=countryList&id=' + id + '&country=' + country,
					success(e) {
						//todo
					},
					fail(e) {
						console.log(e)
						this.$refs.notify.error('跳转页面失败，请稍候再试')
					}
				})
			}
		}
	}
</script>
<style>
	/*号码列表*/
	.phone-list {
		flex-flow: row nowrap;
		justify-content: space-between;
		align-items: center;
		margin-top: 30rpx;
		padding-left: 15rpx;
		padding-right: 15rpx;
		padding-top: 10rpx;
		padding-bottom: 10rpx;
		background-color: #F1F2F3;
		border-radius: 10rpx; 
	}

	.text-country {
		font-size: 28rpx;
		font-weight: bold;
	}

	.text-phone {
		font-size: 35rpx;
		font-weight: 800;
	}

	.text-number {
		font-size: 20rpx;
	}


	.phone-list-left {
		width: 120rpx;
		margin-top: 8rpx;
	}

	.phone-list-right {
		align-items: flex-end;
	}

	.phone-list-right-top {
		flex-flow: row nowrap;
	}

	.phone-list-right-bottom {
		margin-top: 18rpx;
	}
	.phone-left{
		flex-flow: row nowrap;
		justify-content: flex-start;
	}
	.phone-list-middle{
		flex-flow: column;
		justify-content: center;
	}
	.phone-list-middle-bottom{
		flex-flow: row nowrap;
	}
</style>
